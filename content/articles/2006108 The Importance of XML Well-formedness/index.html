---
title: The Importance of XML Well-formedness
date: 2006-04-18 08:50:00 Z
tags: ["Tech","XML"]
wordpress_path: /2006/04/importance-of-xml-well-formedness
---
XHTML validity is a buzzword around the Internet, but many people generally agree that it is not all that important.  It has its advantages, but it is not the end of the world if you can't quite get it.  XML well-formedness, however, is very important.  Why?  Because it makes server-side hackery much easier.  That may not be the only reason, but it is an important one.  Some people have mastered the art of screen-scraping with RegExps, but I and others like me have never quite mastered that often-complicated technique.    Instead, it is much easier to parse the webpage as XML and pull out the data that way.  This works especially well when the page is known to conform to some standard (as in the code addition for <a href="http://bloggercomments.ning.com/">Blogger Recent Comments</a>).

While some leniancy can be built in, here are some basic guidelines for keeping your pages well-formed and making our job that much easier:
<ol><li><span style="font-weight: bold;">XHTML empty tags</span> -- some tags, such as &lt;br&gt;, &lt;link ...&gt;, and others used to be written in HTML as you see them there.  This breaks XML well-formedness.  Instead, one should use &lt;br /&gt;, &lt;link ... /&gt; and the like. (note to advanced users, this can be partially overcome using a RegExp line similar to $XMLdata = preg_replace('/&lt;(img|meta|link|hr|br)([^&lt;&gt;]*?)([\/]?)&gt;/i','&lt;$1$2 /&gt;', $XMLdata); )
</li><li><span style="font-weight: bold;">Escaping out Ampersands</span> -- Many URLs contain the '&amp;' character, and sometimes this character is used in content as well.  If this character is left unescaped it breaks XML well-formedness.  Use '&amp;amp;' instead.  (note to advanced users, this can be mostly overcome use a RegExp line similar to $XMLdata = preg_replace('/&amp;([^;]{10})/i','&amp;amp;$1', $XMLdata); )
</li><li><span style="font-weight: bold;">Escaping Scripts</span> -- JavaScript code will often contain characters that must be escaped out in XML, but which cannot be escaped out if the script is to work.  To overcome this you add '//&lt;![CDATA[' after every &lt;script&gt; tag and '//]]&gt;' before every &lt;/script&gt; tag.
</li><li><span style="font-weight: bold;">Closing tags</span> -- Some tags, such as &lt;p&gt; are often inserted by web designers without a closing tag.  instead of '&lt;p&gt;text&lt;p&gt;more text' use '&lt;p&gt;text&lt;/p&gt;&lt;p&gt;more text&lt;/p&gt;'.  Note that XML is case-sensetive, so if you open a section, say, with &lt;head&gt; you must end it with &lt;/head&gt; not &lt;/HEAD&gt;</li><li><span style="font-weight: bold;">Quoting Attributes</span> -- &lt;p class="1"&gt; not &lt;p class=1&gt;, etc.  Quotation marks <span style="font-style: italic;">always</span> go around attributes, no matter what.</li><li><span style="font-weight: bold;">Non-tag &lt; &gt;</span> -- If you reference a Blogger template tag (such as &lt;$BlogID$&gt;) or for some other reason need to include a &lt; or &gt; character in content, you must escape it out with &amp;lt; or &amp;gt;, respecively.</li></ol>A note about content : Blogger's post form and comment form is not very good at checking XML well-formedness.  Thus if you want to maintain a (at least mostly) well-formed page you must follow these rules in any code entered in these forms.  For example, if you enter a &lt; character in the blogger post form, it does not escape it out for you, you must actually enter &amp;lt;, and the same goes for the comment form.  This is sometimes annoying if you are trying to maintain full XML well-formedness because a well-meaning commentor can sometimes mess up your well-formedness and you must go and edit their comment.  This is not usually the biggest problem, however, since it is usually one of the first two problems which can be overcome as noted.  You can check for XML-formedness without validating XHTML using <a href="http://www.ltg.ed.ac.uk/%7Erichard/xml-check.html">this tool</a>.
